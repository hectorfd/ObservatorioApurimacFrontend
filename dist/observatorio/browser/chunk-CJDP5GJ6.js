import{a as K,b as Q,c as X}from"./chunk-AZIIFHVM.js";import{c as R,f as G,g as J}from"./chunk-QOWQCIFR.js";import"./chunk-OZDNAGIT.js";import{f as z,h as P}from"./chunk-NO3MC2F2.js";import{b as j}from"./chunk-2UOJ7Y6R.js";import{c as O}from"./chunk-ZNHUE6FI.js";import"./chunk-ABDJEFZA.js";import"./chunk-EJJBCPAK.js";import"./chunk-75CMSFKH.js";import{a as T,d as k,e as q,g as V,i as W,j as A,q as B}from"./chunk-UQDV26LH.js";import{j as H}from"./chunk-LS3WY25F.js";import{Ab as w,Db as d,Fb as h,Ob as s,Pb as U,Qb as S,Rb as M,Sb as g,Tb as b,Ua as l,Ub as _,Va as v,Wb as E,Xb as D,ha as x,jb as C,lb as c,pa as p,qa as f,ub as i,uc as L,vb as r,vc as N,wb as m,wc as F,zc as I}from"./chunk-BXJQFZYG.js";var Y=()=>[5,10,25,100];function Z(u,y){if(u&1){let t=w();i(0,"div",27)(1,"div",28),m(2,"img",29),i(3,"div",30)(4,"div",31)(5,"small",32),m(6,"i",33),s(7),r(),i(8,"small",32),m(9,"i",34),s(10),r()(),i(11,"a",35),s(12),r(),i(13,"div",36)(14,"div",31)(15,"small",37),d("click",function(){let e=p(t).$implicit,o=h();return f(o.redireccionarEditarUusario(e.id_usuario))}),m(16,"i",38),s(17," EDITAR "),r(),i(18,"small",39),d("click",function(){let e=p(t).$implicit,o=h();return f(o.eliminarUsuario(e.id_usuario))}),m(19,"i",40),s(20," ELIMINAR "),r()()()()()()}if(u&2){let t=y.$implicit;l(6),c("ngClass",t.estado==="Activo"?"text-success":"text-danger"),l(),U(t.estado),l(3),S(" ",t.fecha_registro,""),l(2),M("",t.nombre," ",t.apellido,"")}}function $(u,y){if(u&1){let t=w();i(0,"div",23)(1,"div",41)(2,"h4"),s(3,"No se encontraron usuarios con los filtros aplicados"),r(),i(4,"button",42),d("click",function(){p(t);let e=h();return f(e.limpiarFiltros())}),s(5,"Ver todos los usuarios"),r()()()}}var ge=(()=>{class u{constructor(t,a){this.router=t,this.api=a,this.busquedaNombre="",this.fechaDesde="",this.fechaHasta="",this.usuarios=[],this.allUsuarios=[]}redireccionarEditarUusario(t){this.router.navigate(["/editar-usuario",t])}ngOnInit(){this.getUsuarios()}getUsuarios(){this.api.getAllUsuarios(1).subscribe({next:t=>{this.usuarios=t,this.allUsuarios=t,console.log("Usuarios cargados:",this.usuarios)},error:t=>{console.error("Error al cargar usuarios:",t)}})}eliminarUsuario(t){confirm("\xBFEst\xE1s seguro de que deseas eliminar este usuario?")&&this.api.deleteUsuario(t).subscribe({next:a=>{console.log("Usuario eliminado correctamente"),this.getUsuarios()},error:a=>{console.error("Error al eliminar usuario:",a)}})}buscarUsuarios(t){t.preventDefault();let a=[...this.allUsuarios];if(this.busquedaNombre&&this.busquedaNombre.trim()!==""){let e=this.busquedaNombre.toLowerCase().trim();a=a.filter(o=>o.nombre.toLowerCase().includes(e)||o.apellido.toLowerCase().includes(e))}if(this.fechaDesde){let e=new Date(this.fechaDesde);e.setHours(0,0,0,0),a=a.filter(o=>new Date(o.fecha_registro)>=e)}if(this.fechaHasta){let e=new Date(this.fechaHasta);e.setHours(23,59,59,999),a=a.filter(o=>new Date(o.fecha_registro)<=e)}this.usuarios=a,console.log("B\xFAsqueda realizada:",{nombre:this.busquedaNombre,desde:this.fechaDesde,hasta:this.fechaHasta,resultados:this.usuarios.length})}limpiarFiltros(){this.busquedaNombre="",this.fechaDesde="",this.fechaHasta="",this.usuarios=[...this.allUsuarios]}static{this.\u0275fac=function(a){return new(a||u)(v(H),v(j))}}static{this.\u0275cmp=x({type:u,selectors:[["app-lista-usuario"]],standalone:!0,features:[E],decls:36,vars:9,consts:[["id","wrapper",1,"d-flex"],["id","content-wrapper",1,"d-flex","flex-column","w-100",2,"height","100vh","overflow-y","auto"],["id","content",1,"d-flex","flex-column","w-100"],[1,"container-fluid"],[1,"d-sm-flex","align-items-center","justify-content-between","mb-4"],[1,"h3","mb-0","text-gray-800"],[1,"container-fluid","py-5"],[1,"container"],[1,"container","my-4"],[1,"bg-white","p-4","rounded","shadow-sm",3,"submit"],[1,"input-group","mb-3"],["id","basic-addon1",1,"input-group-text"],[1,"fa","fa-file-alt","text-primary"],["type","text","placeholder","Buscar usuario... (opcional)","aria-label","Buscar usuario...","aria-describedby","basic-addon1","name","busquedaNombre",1,"form-control",3,"ngModelChange","ngModel"],[1,"row","g-3"],[1,"col-md-4"],["for","fechaDesde",1,"form-label"],["type","date","id","fechaDesde","name","fechaDesde",1,"form-control",3,"ngModelChange","ngModel"],["for","fechaHasta",1,"form-label"],["type","date","id","fechaHasta","name","fechaHasta",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-4","d-flex","align-items-end"],["type","submit",1,"btn","btn-primary","me-2"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"row"],["class","col-lg-4 col-md-6 mb-4",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],["aria-label","Select page",3,"length","pageSize","pageSizeOptions"],[1,"col-lg-4","col-md-6","mb-4"],[1,"package-item","bg-white","mb-2"],["src","assets/img/User.png","alt","",1,"img-fluid"],[1,"p-4"],[1,"d-flex","justify-content-between","mb-3"],[1,"m-0"],[1,"fa","fa-circle","mr-2",3,"ngClass"],[1,"fa","fa-calendar-alt","text-primary","mr-2"],["href","",1,"h5","text-decoration-none"],[1,"border-top","mt-4","pt-4"],["title","EDITAR",1,"m-0",3,"click"],[1,"fa","fa-edit","text-success","mr-2"],["title","ELIMINAR",1,"m-0",3,"click"],[1,"fas","fa-trash-alt","text-danger"],[1,"col-12","text-center","p-5"],[1,"btn","btn-primary","mt-3",3,"click"]],template:function(a,e){a&1&&(i(0,"div",0),m(1,"app-sidebar"),i(2,"div",1)(3,"div",2),m(4,"app-topbar"),i(5,"div",3)(6,"div",4)(7,"h1",5),s(8,"Lista de Usuarios"),r()(),i(9,"div",6)(10,"div",7)(11,"div",8)(12,"form",9),d("submit",function(n){return e.buscarUsuarios(n)}),i(13,"div",10)(14,"span",11),m(15,"i",12),r(),i(16,"input",13),_("ngModelChange",function(n){return b(e.busquedaNombre,n)||(e.busquedaNombre=n),n}),r()(),i(17,"div",14)(18,"div",15)(19,"label",16),s(20,"Desde"),r(),i(21,"input",17),_("ngModelChange",function(n){return b(e.fechaDesde,n)||(e.fechaDesde=n),n}),r()(),i(22,"div",15)(23,"label",18),s(24,"Hasta"),r(),i(25,"input",19),_("ngModelChange",function(n){return b(e.fechaHasta,n)||(e.fechaHasta=n),n}),r()(),i(26,"div",20)(27,"button",21),s(28,"Buscar"),r(),i(29,"button",22),d("click",function(){return e.limpiarFiltros()}),s(30,"Limpiar"),r()()()()(),i(31,"div",23),C(32,Z,21,5,"div",24),r(),C(33,$,6,0,"div",25),m(34,"mat-paginator",26),r()()()(),m(35,"app-footer"),r()()),a&2&&(l(16),g("ngModel",e.busquedaNombre),l(5),g("ngModel",e.fechaDesde),l(4),g("ngModel",e.fechaHasta),l(7),c("ngForOf",e.usuarios),l(),c("ngIf",e.usuarios.length===0),l(),c("length",100)("pageSize",10)("pageSizeOptions",D(8,Y)))},dependencies:[X,K,Q,O,z,P,R,J,G,I,L,N,F,B,A,T,k,q,W,V]})}}return u})();export{ge as ListaUsuarioComponent};
