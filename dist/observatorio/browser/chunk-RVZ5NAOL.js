import{a as L,b as T,c as U}from"./chunk-AZIIFHVM.js";import{b as R}from"./chunk-2UOJ7Y6R.js";import{a as E,b as m,d as w,e as S,f as y,h as d,j as I,k as D,l as _,p as N,r as q}from"./chunk-UQDV26LH.js";import{j as C}from"./chunk-LS3WY25F.js";import{Db as s,Fb as v,Ob as n,Ra as g,Ua as f,Va as c,Wb as b,ha as u,jb as h,lb as p,ub as i,vb as t,wb as a,wc as x,zc as F}from"./chunk-BXJQFZYG.js";function V(l,k){if(l&1&&(i(0,"div",29),a(1,"img",30),t()),l&2){let r=v();f(),p("src",r.imagenURL,g)}}var W=(()=>{class l{constructor(r,e){this.api=r,this.router=e,this.imagenURL=null,this.infografiaForm=new y({fecha:new d("",m.required),lugar:new d("",m.required),titulo:new d("",m.required),descripcion:new d("",m.required),portada:new d("",m.required)})}mostrarImagen(r){let e=r.target.files[0];if(e){this.imagenFile=e;let o=new FileReader;o.onload=()=>{this.imagenURL=o.result,this.infografiaForm.patchValue({portada:e.name})},o.readAsDataURL(e)}}registrarInfografia(){if(this.infografiaForm.valid&&this.imagenFile){let r=localStorage.getItem("token");if(!r){console.error("No se encontr\xF3 el token");return}let e=new FormData;e.append("titulo",this.infografiaForm.controls.titulo.value||""),e.append("descripcion",this.infografiaForm.controls.descripcion.value||""),e.append("fecha",this.infografiaForm.controls.fecha.value||""),e.append("lugar",this.infografiaForm.controls.lugar.value||""),e.append("portada",this.imagenFile,this.imagenFile.name),e.append("token",r),this.api.postInfografia(e).subscribe(()=>{this.router.navigate(["/lista-infografia"])},o=>{console.error("Error al registrar la infograf\xEDa",o)})}}static{this.\u0275fac=function(e){return new(e||l)(c(R),c(C))}}static{this.\u0275cmp=u({type:l,selectors:[["app-crear-infografia"]],standalone:!0,features:[b],decls:43,vars:2,consts:[["id","wrapper",1,"d-flex"],["id","content-wrapper",1,"d-flex","flex-column","w-100",2,"height","100vh","overflow-y","auto"],["id","content",1,"d-flex","flex-column","w-100"],[1,"container-fluid"],[1,"d-sm-flex","align-items-center","justify-content-between","mb-4"],[1,"h3","mb-0","text-gray-800"],[1,"row"],[1,"col-lg-9","mb-4","mx-auto"],[1,"card","shadow","mb-4"],[1,"card-header","py-3","bg-primary","text-white"],[1,"m-0","font-weight-bold"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"row","mb-3"],[1,"col-md-6"],["for","fecha",1,"form-label"],["type","date","id","fecha","formControlName","fecha","required","",1,"form-control"],["for","lugar",1,"form-label"],["type","text","id","lugar","placeholder","Ej: Lima, Per\xFA","formControlName","lugar","required","",1,"form-control"],[1,"mb-3"],["for","titulo",1,"form-label"],["type","text","id","titulo","placeholder","T\xEDtulo de la infograf\xEDa","formControlName","titulo","required","",1,"form-control"],["for","descripcion",1,"form-label"],["id","descripcion","rows","4","placeholder","Escribe aqu\xED los detalles de la infograf\xEDa...","formControlName","descripcion","required","",1,"form-control"],["for","imagen",1,"form-label"],["type","file","id","imagen","accept","image/*","required","",1,"form-control",3,"change"],["class","text-center mb-3",4,"ngIf"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary"],[1,"text-center","mb-3"],["alt","Previsualizaci\xF3n",1,"img-fluid","rounded","shadow",2,"max-height","250px",3,"src"]],template:function(e,o){e&1&&(i(0,"div",0),a(1,"app-sidebar"),i(2,"div",1)(3,"div",2),a(4,"app-topbar"),i(5,"div",3)(6,"div",4)(7,"h1",5),n(8,"Crear Nueva Infografia"),t()(),i(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"h5",10),n(14,"Registrar Nueva Infografia"),t()(),i(15,"div",11)(16,"form",12),s("ngSubmit",function(){return o.registrarInfografia()}),i(17,"div",13)(18,"div",14)(19,"label",15),n(20,"Fecha"),t(),a(21,"input",16),t(),i(22,"div",14)(23,"label",17),n(24,"Lugar"),t(),a(25,"input",18),t()(),i(26,"div",19)(27,"label",20),n(28,"T\xEDtulo"),t(),a(29,"input",21),t(),i(30,"div",19)(31,"label",22),n(32,"Descripci\xF3n"),t(),a(33,"textarea",23),t(),i(34,"div",19)(35,"label",24),n(36,"Foto de Portada"),t(),i(37,"input",25),s("change",function(G){return o.mostrarImagen(G)}),t()(),h(38,V,2,1,"div",26),i(39,"div",27)(40,"button",28),n(41,"Registrar Infograf\xEDa"),t()()()()()()()(),a(42,"app-footer"),t()()()),e&2&&(f(16),p("formGroup",o.infografiaForm),f(22),p("ngIf",o.imagenURL))},dependencies:[T,U,L,F,x,q,I,E,w,S,N,D,_]})}}return l})();export{W as CrearInfografiaComponent};
