import{a as R,b as q,c as k}from"./chunk-AZIIFHVM.js";import{b as A}from"./chunk-2UOJ7Y6R.js";import{a as S,d as w,e as x,f as C,h as l,j as _,k as y,l as N,m as F,n as U,o as I,p as j,r as D}from"./chunk-UQDV26LH.js";import{h,j as E}from"./chunk-LS3WY25F.js";import{Db as b,Ob as i,Ua as u,Va as s,Wb as g,a as c,ha as f,lb as p,ub as t,vb as e,wb as a,zc as v}from"./chunk-BXJQFZYG.js";var $=(()=>{class d{constructor(o,n,r){this.route=o,this.api=n,this.router=r,this.formulario=new C({id_usuario:new l(""),nombre:new l(""),apellido:new l(""),nombre_usuario:new l(""),contrasena:new l(""),estado:new l(""),fecha_registro:new l(""),token:new l("")})}ngOnInit(){let o=this.route.snapshot.paramMap.get("id");console.log("ID recibido:",o),this.getDetalleUsuario(o)}getDetalleUsuario(o){this.api.getDetalleUsuario(o).subscribe({next:n=>{console.log("Detalles de la usuario:",n);let r=n[0],m=this.getToken();this.formulario.patchValue({id_usuario:r.id_usuario,nombre:r.nombre,apellido:r.apellido,nombre_usuario:r.nombre_usuario,contrasena:r.contrasena,estado:r.estado,fecha_registro:r.fecha_registro,token:m})},error:n=>{console.error("Error al cargar detalles del usuario:",n)}}),console.log(this.formulario.value.id_usuario)}getToken(){return typeof window<"u"&&window.localStorage?localStorage.getItem("token"):null}getImageUrl(o){return o?o.startsWith("http://")||o.startsWith("https://")?o:`http://localhost:80/API OBSERVATORIO/${o}`:"assets/img/no-image.jpg"}putForm(o){let n=c({},o);this.api.putUsuario(n).subscribe(r=>{this.router.navigate(["/lista-usuario"])})}static{this.\u0275fac=function(n){return new(n||d)(s(h),s(A),s(E))}}static{this.\u0275cmp=f({type:d,selectors:[["app-editar-usuario"]],standalone:!0,features:[g],decls:58,vars:2,consts:[["id","wrapper",1,"d-flex"],["id","content-wrapper",1,"d-flex","flex-column","w-100"],["id","content",1,"d-flex","flex-column","w-100"],[1,"container-fluid"],[1,"d-sm-flex","align-items-center","justify-content-between","mb-4"],[1,"h3","mb-0","text-gray-800"],[1,"row"],[1,"col-lg-9","mb-4","mx-auto"],[1,"card","shadow","mb-4"],[1,"card-header","py-3","bg-primary","text-white"],[1,"m-0","font-weight-bold"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"row","mb-3"],[1,"col-md-6"],["for","nombre",1,"form-label"],["type","text","id","nombre","formControlName","nombre","placeholder","Ej: Juan","required","",1,"form-control"],["for","apellido",1,"form-label"],["type","text","id","apellido","formControlName","apellido","placeholder","Ej: P\xE9rez","required","",1,"form-control"],[1,"col-md-4"],["for","nombre_usuario",1,"form-label"],["type","text","id","nombre_usuario","formControlName","nombre_usuario","placeholder","Ej: juan.perez@example.com","required","",1,"form-control"],["for","contrasena",1,"form-label"],["type","password","id","contrasena","formControlName","contrasena","placeholder","******","required","",1,"form-control"],["for","confirmar",1,"form-label"],["type","password","id","confirmar","placeholder","******","disabled","",1,"form-control",3,"value"],["for","fecha_registro",1,"form-label"],["type","date","id","fecha_registro","formControlName","fecha_registro","required","",1,"form-control"],["for","estado",1,"form-label"],["id","estado","formControlName","estado","required","",1,"form-control"],["value",""],["value","Activo"],["value","Inactivo"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary"]],template:function(n,r){if(n&1&&(t(0,"div",0),a(1,"app-sidebar"),t(2,"div",1)(3,"div",2),a(4,"app-topbar"),t(5,"div",3)(6,"div",4)(7,"h1",5),i(8,"Editar Usario"),e()(),t(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"h5",10),i(14,"Editar Usuario "),e()(),t(15,"div",11)(16,"form",12),b("ngSubmit",function(){return r.putForm(r.formulario.value)}),t(17,"div",13)(18,"div",14)(19,"label",15),i(20,"Nombre"),e(),a(21,"input",16),e(),t(22,"div",14)(23,"label",17),i(24,"Apellido"),e(),a(25,"input",18),e()(),t(26,"div",13)(27,"div",19)(28,"label",20),i(29,"Nombre de Usuario o Correo"),e(),a(30,"input",21),e(),t(31,"div",19)(32,"label",22),i(33,"Contrase\xF1a"),e(),a(34,"input",23),e(),t(35,"div",19)(36,"label",24),i(37,"Confirmar Contrase\xF1a"),e(),a(38,"input",25),e()(),t(39,"div",13)(40,"div",14)(41,"label",26),i(42,"Fecha de Registro"),e(),a(43,"input",27),e(),t(44,"div",14)(45,"label",28),i(46,"Estado"),e(),t(47,"select",29)(48,"option",30),i(49,"Seleccione"),e(),t(50,"option",31),i(51,"Activo"),e(),t(52,"option",32),i(53,"Inactivo"),e()()()(),t(54,"div",33)(55,"button",34),i(56,"Registrar Usuario"),e()()()()()()()()(),a(57,"app-footer"),e()()),n&2){let m;u(16),p("formGroup",r.formulario),u(22),p("value",(m=r.formulario.get("contrasena"))==null?null:m.value)}},dependencies:[q,k,R,v,D,_,U,I,S,F,w,x,j,y,N]})}}return d})();export{$ as EditarUsuarioComponent};
