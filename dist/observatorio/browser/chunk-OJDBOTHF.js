import{a as j,b as A,c as L}from"./chunk-AZIIFHVM.js";import{b as U}from"./chunk-2UOJ7Y6R.js";import{a as y,d as D,e as _,f as F,h as l,j as V,k as I,l as R,p as N,r as T}from"./chunk-UQDV26LH.js";import{h as S,j as C}from"./chunk-LS3WY25F.js";import{Db as p,Fb as b,Ob as n,Ra as v,Ua as d,Va as c,Wb as E,a as f,ha as g,jb as h,lb as s,ub as r,vb as i,wb as a,wc as x,zc as w}from"./chunk-BXJQFZYG.js";function q(m,G){if(m&1&&(r(0,"div",30),a(1,"video",31),i()),m&2){let e=b();d(),s("src",e.imagenURL,v)}}var Q=(()=>{class m{mostrarImagen(e){let o=e.target.files[0];if(o){let t=new FileReader;t.onload=()=>{this.imagenURL=t.result},t.readAsDataURL(o)}}constructor(e,o,t){this.route=e,this.api=o,this.router=t,this.imagenURL=null,this.formulario=new F({id_video:new l(""),fecha:new l(""),lugar:new l(""),titulo:new l(""),descripcion:new l(""),portada:new l(""),token:new l("")})}ngOnInit(){let e=this.route.snapshot.paramMap.get("id");console.log("ID recibido:",e),this.getDetalleVideo(e)}getDetalleVideo(e){this.api.getDetalleVideo(e).subscribe({next:o=>{console.log("Detalles de la video:",o);let t=o[0],u=this.getToken();this.formulario.patchValue({id_video:t.id_video,fecha:t.fecha,lugar:t.lugar,titulo:t.titulo,descripcion:t.descripcion,portada:t.portada,token:u}),this.imagenURL=this.getImageUrl(t.portada)},error:o=>{console.error("Error al cargar detalles del video:",o)}}),console.log(this.formulario.value.id_video)}getToken(){return typeof window<"u"&&window.localStorage?localStorage.getItem("token"):null}getImageUrl(e){return e?e.startsWith("http://")||e.startsWith("https://")?e:`http://localhost:80/API OBSERVATORIO/${e}`:"assets/img/no-image.jpg"}putForm(e){let o=f({},e);this.api.putVideo(o).subscribe(t=>{this.router.navigate(["/lista-video"])})}static{this.\u0275fac=function(o){return new(o||m)(c(S),c(U),c(C))}}static{this.\u0275cmp=g({type:m,selectors:[["app-editar-video"]],standalone:!0,features:[E],decls:45,vars:2,consts:[["id","wrapper",1,"d-flex"],["id","content-wrapper",1,"d-flex","flex-column","w-100"],["id","content",1,"d-flex","flex-column","w-100"],[1,"container-fluid"],[1,"d-sm-flex","align-items-center","justify-content-between","mb-4"],[1,"h3","mb-0","text-gray-800"],[1,"row"],[1,"col-lg-9","mb-4","mx-auto"],[1,"card","shadow","mb-4"],[1,"card-header","py-3","bg-primary","text-white"],[1,"m-0","font-weight-bold"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"row","mb-3"],[1,"col-md-6"],["for","fecha",1,"form-label"],["type","date","id","fecha","formControlName","fecha","required","",1,"form-control"],["for","lugar",1,"form-label"],["type","text","id","lugar","placeholder","Ej: Lima, Per\xFA","formControlName","lugar","required","",1,"form-control"],[1,"mb-3"],["for","titulo",1,"form-label"],["type","text","id","titulo","placeholder","T\xEDtulo de la noticia","formControlName","titulo","required","",1,"form-control"],["for","descripcion",1,"form-label"],["id","descripcion","rows","4","placeholder","Escribe aqu\xED los detalles de la infograf\xEDa...","formControlName","descripcion","required","",1,"form-control"],["for","imagen",1,"form-label"],["type","file","id","imagen","accept","video/*",1,"form-control",3,"change"],[1,"text-muted"],["class","text-center mb-3",4,"ngIf"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary"],[1,"text-center","mb-3"],["controls","","alt","Previsualizaci\xF3n",1,"img-fluid","rounded","shadow",2,"max-height","250px",3,"src"]],template:function(o,t){o&1&&(r(0,"div",0),a(1,"app-sidebar"),r(2,"div",1)(3,"div",2),a(4,"app-topbar"),r(5,"div",3)(6,"div",4)(7,"h1",5),n(8,"Editar Video"),i()(),r(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"h5",10),n(14,"Editar Video "),i()(),r(15,"div",11)(16,"form",12),p("ngSubmit",function(){return t.putForm(t.formulario.value)}),r(17,"div",13)(18,"div",14)(19,"label",15),n(20,"Fecha"),i(),a(21,"input",16),i(),r(22,"div",14)(23,"label",17),n(24,"Lugar"),i(),a(25,"input",18),i()(),r(26,"div",19)(27,"label",20),n(28,"T\xEDtulo"),i(),a(29,"input",21),i(),r(30,"div",19)(31,"label",22),n(32,"Descripci\xF3n"),i(),a(33,"textarea",23),i(),r(34,"div",19)(35,"label",24),n(36,"Foto de Portada"),i(),r(37,"input",25),p("change",function(k){return t.mostrarImagen(k)}),i(),r(38,"small",26),n(39,"Deja este campo vac\xEDo si no deseas cambiar la imagen actual"),i()(),h(40,q,2,1,"div",27),r(41,"div",28)(42,"button",29),n(43,"Actualizar Noticia"),i()()()()()()()()(),a(44,"app-footer"),i()()),o&2&&(d(16),s("formGroup",t.formulario),d(24),s("ngIf",t.imagenURL))},dependencies:[A,L,j,w,x,T,V,y,D,_,N,I,R]})}}return m})();export{Q as EditarVideoComponent};
